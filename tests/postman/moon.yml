layer: 'automation'
language: 'javascript'

project:
  name: 'API Tests'
  description: 'Postman/Newman API test collection'

tasks:
  install:
    command: 'npm install'
    inputs:
      - 'package.json'
    outputs:
      - 'node_modules'

  test:
    command: 'npm test'
    inputs:
      - 'collection.json'
      - 'package.json'
    deps:
      - '~:install'

  test-verbose:
    command: 'npm run test:verbose'
    inputs:
      - 'collection.json'
      - 'package.json'
    deps:
      - '~:install'

  test-html:
    command: 'npm run test:html'
    inputs:
      - 'collection.json'
      - 'package.json'
    outputs:
      - 'report.html'
    deps:
      - '~:install'

  test-script:
    command: './test.sh'
    inputs:
      - 'collection.json'
      - 'test.sh'
layer: 'automation'
stack: 'unknown'
language: 'typescript'

tags:
  - 'test'
  - 'testing'
  - 'postman'
  - 'newman'

project:
  name: 'API Tests'
  description: 'Postman/Newman API test collection'

tasks:
  install:
    command: 'pnpm install'
    inputs:
      - 'package.json'
    outputs:
      - 'node_modules'

  test:
    command: 'pnpm test'
    inputs:
      - 'collection.json'
      - 'package.json'
    deps:
      - '~:install'

  test-verbose:
    command: 'pnpm run test:verbose'
    inputs:
      - 'collection.json'
      - 'package.json'
    deps:
      - '~:install'

  test-html:
    command: 'pnpm run test:html'
    inputs:
      - 'collection.json'
      - 'package.json'
    outputs:
      - 'report.html'
    deps:
      - '~:install'

  test-script:
    command: './test.sh'
    inputs:
      - 'collection.json'
      - 'test.sh'
# Go API Structure Documentation

## ğŸ“ Directory Structure (Feature-First)

```
api-golang/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ main.go                 # Application entry point
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ impact_partner/             # Impact Partner feature module
â”‚   â”‚   â”œâ”€â”€ entity.go               # Domain model
â”‚   â”‚   â”œâ”€â”€ repository.go           # Data access layer
â”‚   â”‚   â”œâ”€â”€ service.go              # Business logic
â”‚   â”‚   â””â”€â”€ controller.go           # HTTP handlers
â”‚   â””â”€â”€ impact_project/             # Impact Project feature module
â”‚       â”œâ”€â”€ entity.go               # Domain model
â”‚       â”œâ”€â”€ repository.go           # Data access layer
â”‚       â”œâ”€â”€ service.go              # Business logic
â”‚       â””â”€â”€ controller.go           # HTTP handlers
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ api-golang                  # Compiled binary
â”œâ”€â”€ go.mod
â”œâ”€â”€ moon.yml
â””â”€â”€ README.md
```

## ğŸ›ï¸ Architecture - Feature-First Design

### Feature Modules

Each feature is organized as a self-contained module with all its layers:

#### **Impact Partner Module** (`internal/impact_partner/`)
- `entity.go` - Domain model (ImpactPartner struct)
- `repository.go` - Data access with in-memory storage
- `service.go` - Business logic and validation
- `controller.go` - HTTP handlers and routing

#### **Impact Project Module** (`internal/impact_project/`)
- `entity.go` - Domain model (ImpactProject struct)
- `repository.go` - Data access with partner relationships
- `service.go` - Business logic including filtering
- `controller.go` - HTTP handlers with query support

#### **Main Application** (`cmd/api/`)
Application entry point that initializes and wires all modules together.

### Why Feature-First?

**Traditional Layer-First:**
```
internal/
â”œâ”€â”€ entities/        # All entities together
â”œâ”€â”€ repositories/    # All repositories together
â”œâ”€â”€ services/        # All services together
â””â”€â”€ controllers/     # All controllers together
```

**Feature-First (Our Approach):**
```
internal/
â”œâ”€â”€ impact_partner/  # Everything for partners
â””â”€â”€ impact_project/  # Everything for projects
```

**Benefits:**
- âœ… High cohesion - related code stays together
- âœ… Easy to find - all partner code in one place
- âœ… Scalable - add features without touching others
- âœ… Clear ownership - each feature is independent
- âœ… Better for teams - parallel development without conflicts

## ğŸ”„ Request Flow

```
HTTP Request
    â†“
Controller (validates, routes)
    â†“
Service (business logic)
    â†“
Repository (data access)
    â†“
Entity (domain model)
```

## ğŸ¯ Design Principles

1. **Separation of Concerns**: Each layer has a specific responsibility
2. **Dependency Injection**: Dependencies are injected via constructors
3. **Internal Package**: Using Go's `internal/` convention to keep packages private
4. **Clean Architecture**: Domain-centric design with clear boundaries
5. **Standard Project Layout**: Following Go community conventions with `cmd/` and `internal/`

## ğŸ“¦ Module Structure

### Impact Partners Module
- **Entity**: `ImpactPartner` (id, name, category)
- **Repository**: In-memory storage with thread-safe operations
- **Service**: Business logic for partner operations
- **Controller**: REST endpoints for partners

### Impact Projects Module
- **Entity**: `ImpactProject` (id, name, category, partnerId)
- **Repository**: In-memory storage with partner relationship
- **Service**: Business logic including partner filtering
- **Controller**: REST endpoints with query parameter support

## ğŸš€ Running the Application

```bash
# Development
moon run api-golang:dev

# Build
moon run api-golang:build

# Run binary
./bin/api-golang
```

## ğŸ“¡ Available Endpoints

- `GET /api/impact-partners` - List all partners
- `GET /api/impact-partners/{id}` - Get partner by ID
- `GET /api/impact-projects` - List all projects
- `GET /api/impact-projects/{id}` - Get project by ID
- `GET /api/impact-projects?partnerId={id}` - Filter projects by partner

## ğŸ”® Future Enhancements

- Add database integration (PostgreSQL, MongoDB)
- Implement POST, PUT, DELETE endpoints
- Add authentication/authorization
- Add request validation
- Add logging middleware
- Add unit tests for each layer
- Add integration tests
- Add OpenAPI/Swagger documentation
